<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Snow Rider 3D - Thrilling Skiing Adventure Game</title>
    <meta name="description" content="Immerse yourself in Snow Rider 3D, a thrilling skiing adventure game set in breathtaking mountain landscapes. Ride your sleigh down snowy slopes, dodge obstacles, and collect gifts for an exhilarating experience.">
    <meta name="theme-color" content="#007ACC">
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Your Name">
    <meta name="keywords" content="Snow Rider 3D, skiing game, winter sports, snowboarding, ski game, mountain landscapes, skiing adventure, snowboarding adventure, snowy mountain, sleigh ride, winter game">
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
        var gameInstance = UnityLoader.instantiate("gameContainer", "Build/SnowRider3D-gd-1.json", {onProgress: UnityProgress,Module:{onRuntimeInitialized: function() {UnityProgress(gameInstance, "complete")}}});
    </script>
</head>
<!-- INYECTAR: pegar justo antes de </body> -->
<script>
(function forceCoins(){
  const TARGET = "9999999";
  const TRY_INTERVAL = 1500;
  let tries = 0;
  const maxTries = 40; // ~1 minuto

  const trySet = () => {
    tries++;
    try {
      // Normaliza nombres comunes
      const ui = window.gameInstance || window.unityInstance || null;

      // 1) Intento: funcion global SetCoins expuesta por el juego
      if (typeof window.SetCoins === "function") {
        try { window.SetCoins(Number(TARGET)); console.log("[coins] SetCoins() called"); } catch(e){}
      }

      // 2) Intento: si existe objeto GameManager expuesto en JS
      if (window.GameManager && window.GameManager.instance) {
        const gm = window.GameManager.instance;
        if (gm.coins !== undefined) { gm.coins = Number(TARGET); console.log("[coins] GameManager.instance.coins set"); }
        if (gm.money !== undefined) { gm.money = Number(TARGET); console.log("[coins] GameManager.instance.money set"); }
      }

      // 3) Intento: usar SendMessage si Unity lo expone (llama a métodos C#)
      // Probamos con nombres de objeto y método comunes
      if (ui && typeof ui.SendMessage === "function") {
        const targets = ["GameManager","Player","PlayerController","CurrencyManager","Wallet"];
        const methods = ["SetCoins","SetMoney","AddCoins","SetCurrency","SetBalance"];
        for (let t of targets) {
          for (let m of methods) {
            try {
              ui.SendMessage(t, m, TARGET);
              console.log(`[coins] SendMessage(${t}, ${m}, ${TARGET}) attempted`);
            } catch(e){}
          }
        }
      }

      // 4) Intento: forzar en localStorage / IndexedDB (algunos builds leen de aquí)
      try {
        localStorage.setItem("coins", TARGET);
        localStorage.setItem("money", TARGET);
        // some builds use keys like playerData or currency - we set a couple
        let p = localStorage.getItem("playerData");
        if (p) {
          try {
            let obj = JSON.parse(p);
            obj.coins = TARGET;
            obj.money = TARGET;
            localStorage.setItem("playerData", JSON.stringify(obj));
            console.log("[coins] playerData updated in localStorage");
          } catch(e){}
        }
      } catch(e){}

      // 5) Intento: si la instancia Module está lista, intentar exponer alguna cosa
      if (ui && ui.Module) {
        // marcar que intentamos
        // (no hacemos manipulación interna de WASM aquí porque es frágil)
      }

    } catch(e) {
      // no hacer nada visible
    }

    if (tries < maxTries) {
      setTimeout(trySet, TRY_INTERVAL);
    } else {
      console.log("[coins] terminó intentos de inyección");
    }
  };

  // arrancar después de un pequeño retardo para dejar que Unity inicie
  setTimeout(trySet, 1200);
})();
</script>
<body style="overflow:hidden;padding:0px;margin:0px;">
    <div class="webgl-content">
        <div id="gameContainer" style="width: 960px; height: 600px; margin: auto"></div>
    </div>
</body>
</html>

